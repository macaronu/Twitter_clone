{% extends "base_home.html" %}
<html>
    <head>
        {% load static %}
        <link rel="stylesheet" type="text/css" href="{% static 'user/style.css' %}">
    </head>
    <body>
    {% block content %}
        <header>
            <h3 style="padding-top: -10px; margin-left: 3rem">Tweet</h3>
            <a style="margin-right:30%; margin-top: -60px; float: left;" href="{% url 'user:home' %}">
                <img class="material-icon" src="https://cdn-icons-png.flaticon.com/512/109/109618.png">
            </a>
        </header>
        <article class="tweet-detail">
            <div style="width: 100%; word-break: break-all; padding-top: 50px;">
                <div>
                    <div>
                        <a href="{% url 'user:user_profile' pk=tweet.user.id %}">
                            <img class="prof-icon" style="float:left; width: 70px; height: 70px;" src="{{ tweet.user.profile.profile_img_url }}">
                        </a>
                        <a class="prof-name" style="float: left; margin-left: 10px; margin-top: 8px; font-size:50px;" href="{% url 'user:user_profile' pk=tweet.user.id %}">
                            {{ tweet.user }}
                        </a>
                    </div>
                    <div>
                    {% if tweet.user.id == user.id %}
                        <form method="POST" action="{% url 'tweets:tweet_delete' pk=tweet.pk %}">
                        {% csrf_token %}
                            <a href="{% url 'tweets:tweet_delete' pk=tweet.pk %}"><button style="all:unset; float:right" onclick="return confirm('Are you sure you want to delete this tweet?')">
                                <img class="material-icon" src='https://cdn-icons-png.flaticon.com/512/2891/2891491.png'>
                            </button></a>
                        </form>
                        <a href="{% url 'tweets:tweet_edit' pk=tweet.pk %}">
                            <img class="material-icon" style="float:right" src='https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Edit_icon_%28the_Noun_Project_30184%29.svg/1024px-Edit_icon_%28the_Noun_Project_30184%29.svg.png'>
                        </a>
                    {%  endif %}
                    </div>
                </div>
                <div class="tweet-body" style="font-size: larger;">
                    <p>{{ tweet.body }}</p>
                    {% if tweet.image %}<img src='{{ tweet.image.url }}'>{% endif %}
                </div>
                <div>
                    <small style="opacity: 0.4;">
                        {{ tweet.created_at | date:"H:i l, y.m.d" }}
                        {% if tweet.created_at != tweet.updated_at %}
                        (Edited)
                        {% endif %}
                    </small>
                </div>
                <div class="tweet-footer">
                    <div style="display: flex;">
                        <small style="opacity: 0.8; color:rgb(0, 0, 0); margin-left:15px;">
                            <!-- Reply Buttons Here -->
                            <a href="">
                                <img style="width:25px; float:left;" src="https://icons.veryicon.com/png/o/miscellaneous/basic-icon/message-54.png">
                                <p style="float:left;">{{tweet.replies}}</p>
                            </a>
                        </small>
                        <small style="opacity: 0.8; color:rgb(0, 0, 0); margin-left:15px;">
                            <!-- Retweet Buttons Here -->
                            <a href="">
                                <img style="width:25px; float:left;" src="https://icons-for-free.com/iconfiles/png/512/retweet-131965017522500627.png">
                                <p style="float:left;">{{ tweet.retweets }}</p>
                            </a>
                        </small>
                        <small style="opacity: 0.8; color:rgb(0, 0, 0); margin-left:15px;">
                            <!-- Like Buttons Here -->
                            <form method='POST' action="{% url 'tweets:like_tweet' tweet.pk %}">
                                {% csrf_token %}
                                <button type="submit" style="all:unset;" name="tweet_id" value="{{ tweet.id }}">
                                    {% if user in tweet.likes.all %}
                                        <img style="width:20px; float:left; cursor:pointer;" src="https://icons.iconarchive.com/icons/paomedia/small-n-flat/512/heart-icon.png">
                                        <p style="float:left; color:rgb(255, 23, 62);">{{ tweet.likes.count }}</p>
                                    {% else %}
                                        <img style="width:20px; float:left; cursor: pointer;" src="https://www.iconpacks.net/icons/1/free-heart-icon-492-thumb.png">
                                        <p style="float:left;">{{ tweet.likes.count }}</p>
                                    {% endif %}
                                </button>
                            </form>
                        </small>
                    </div>
                </div>
            </div>
        </article>
    {% endblock content %}
    </body>
</html>
